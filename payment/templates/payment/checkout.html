{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block content %}
<header class="py-1">
    <div class="container px-lg-5">
        <div class="p-2 p-lg-3 text-center" 
             style="background-color:lab(6.41% 0.79 -15.83); border-radius:12px; color:white;">
            <div class="m-4 m-lg-5">
                <h1 class="fs-4" style="color:white;">صورت حساب</h1>
                <br>
                <h3 class="fs-4" style="color:white;">لطفا صورت حساب خود را چک کنید</h3>
            </div>
        </div>
    </div>
</header>

<div class="container">
    <div class="row justify-content-center">
        <center>
            <div class="col-10">
                <div class="card">
  <div class="card-header">
    خلاصه سفارشات شما 
  </div>
  <div class="card-body">
{% for product in cart_products %}
{{product.name}}<br>
<p class="product-price">تومان {{ product.price|intcomma }}</p>
<small>
تعداد:
                      {% for key,value in quantities.items %}
                           {% if key == product.id|slugify  %}
                            {{ value }}

                              


                           {% endif %}
                        {% endfor %} 
                        </small><br><hr>



{% endfor %}
<div class="cart-total text-center mt-4">
              <h4>مجموع قیمت کل سفارشات:</h4>
               <h4>تومان {{ total_price|intcomma }}</h4>
                   </div>

<a href="{% url 'cart_summary' %}" class="btn btn-sm btn-outline-secondary">ویرایش سفارش</a>
</div>
</div>
<br><br><br><br>

<div class="card">
  <div class="card-header">
    مشخصات ارسال
  </div>
  <div class="card-body">
    <form action="{% url 'confirm_order' %}" method="POST">
        {% csrf_token %}
  {{shipping_form.as_p}}
  </div>
  <center><button type="submit" class="btn btn-sm btn-outline-secondary">ادامه</button></center>
  </from>
</div>
</div>
<br><br>
            </div>
            
        </center>
    </div>
</div>





{% endblock %}

{% block extra_css %}


<style>
 #products {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 80vh;
}







/* چینش کارت‌ها */
.row-centered {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
}

/* استایل کارت محصول */
.product-card {
    width: 220px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    text-align: right;
    font-family: 'Vazir', Tahoma, sans-serif;
    background: #fff;
    transition: transform 0.2s ease;
    margin-bottom: 20px;
}

.product-card:hover {
    transform: translateY(-4px);
}

/* عکس محصول */
.image-wrapper {
    width: 100%;
    height: 180px;
    overflow: hidden;
}

.image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* محتوای کارت */
.product-content {
    padding: 10px;
}

.product-content h5 {
    font-size: 15px;
    margin: 0 0 6px 0;
    font-weight: bold;
}

.product-content p {
    font-size: 13px;
    margin: 3px 0;
    color: #555;
}

.product-price {
    font-size: 14px;
    font-weight: bold;
    color: #e91e63;
    margin-top: 6px;
}

.card-description {
    max-height: 60px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
}

/* دکمه مشاهده محصول */
.btn-view {
    display: inline-block;
    width: 100%;
    text-align: center;
    padding: 8px 0;
    margin-top: 8px;
    background-color: #007bff;
    color: #fff;
    font-size: 13px;
    font-weight: bold;
    border-radius: 6px;
    text-decoration: none;
    transition: background 0.2s ease;
}

.btn-view:hover {
    background-color: #0056b3;
}

/* فاصله پایین صفحه */
#products {
    padding-bottom: 50px;
}
</style>
{% endblock %}
